
function PanoradoJS(uc){var Tb,vc,Ub,la,za,Ia,Ja,Za,$a,A,qb,wc,Aa,ab,Ka,La,bb,W,cb,db,fa,xc,rb,sb,Ba,eb,tb,Ma,Vb,ma,Na,Wb,Xb,Ca,Z,Oa,Yb;function Zb(){R();var a="";l();}function X(){return b&&b.video?!0:!1}function L(){return b&&b.video&&
    b._type==la?!0:!1}function ub(){return b&&b._type==la&&b.video&&!b.video.ended&&!b.video.paused?!0:!1}function vb(){return b&&b._type==Ia?!0:!1}function $b(){if(L())b.video.currentTime=0,b.video.play();yc(null)}function ac(){if(b)v=b.pan,r=b.tilt,wb(),j=fb(b.scale),Y=S=gb=ga=s=k=0,pa=!1,M=B=0,T=Date.now()}function R(){Da&&(clearTimeout(Da),Da=0);Y=ga=s=k=0;M=Date.now()}function z(){return C==Ja}function zc(a){qa&&(0>a?a=0:a>=qa.length-1&&(a=qa.length-1),a!==$&&(bc(qa[a]),$=a))}function cc(a){zc($+
    a)}function bc(a){a?yc(a):(ha(),dc(null))}function dc(a){C=Za;if(X())b.video.oncanplay=null,L()&&b.video.pause();delete b;b=null;if(a){var f=$a,e=null;if(a.type)switch(a.type){case "cubefile":f=Ia;break;case "videofile":f=la;break;case "livestream":f=za}if(f!=za&&!a.src)$=-1,l();else{var c=null,d=null;b={};switch(f){case $a:c=Ac(a.src);e="imagefile";break;case Ia:c=Ac(a.src);e="cubefile";break;case la:var n=a.src,e=a.loop;C=Aa;d=document.createElement("video");d.onerror=Ea;d.oncanplay=Yc;d.style.display=
    "none";for(var n=n.split(";"),U=null,u=0;u<n.length;u++){var m=null;if(n[u].match(/\S.mp4$/i))m="video/mp4";else if(n[u].match(/\S.webm$/i))m="video/webm";else if(n[u].match(/\S.ogg$/i)||n[u].match(/\S.ogv$/i))m="video/ogg";if(m&&d.canPlayType(m)){U=n[u];break}}d.src=U;if(e)d.loop=!0;if(d)a.src=d.src;e="videofile";break;case za:d=Zc(),e="livestream"}b._type=f;b.type=e;b.img=c;b.video=d;b.src=a.src;b.title=a.title?a.title:"";b.description=a.description?a.description:"";b._projection=a.projection&&
    "spherical"==a.projection?A:qb;E=b._projection;b.projection="spherical"==a.projection?"spherical":"flat";b.horizon=a.horizon?aa(Number(a.horizon),-45,45):0;b.pan=a.pan?Number(a.pan):0;b.tilt=a.tilt?Number(a.tilt):0;b.scale="number"==typeof a.scale?Number(a.scale):1;f=Number(a.horzFov);b.horzFov=0<f&&360>f?f:360;b.vertFov=0;b.is360=360==b.horzFov;b.panSpeed=X()?0:wc;b.tiltSpeed=0;if(null!=a.panSpeed)b.panSpeed=xb(Number(a.panSpeed));if(a.tiltSpeed)b.tiltSpeed=xb(Number(a.tiltSpeed));Pa=a.compassNorth?
    !0:!1;b.compassNorth=a.compassNorth?Number(a.compassNorth):0;b.compassNorth+=3600;b.compassNorth%=360;b._loop=a.loop&&"true"==a.loop?!0:!1;ba=[];ra=null;if(a=a.hotspots)for(f=0;f<a.length;f++)ba.push(new $c(a[f]));b.hotspots=ba;ca.create();N()}}else $=-1,l()}function Ac(a){C=Aa;var b=new Image;b.onload=yb;b.onerror=Ea;b.onabort=Ea;b.src=a;return b}function Yc(a){a=a.target;a.videoWidth&&a.videoHeight?(a.width=a.videoWidth,a.height=a.videoHeight,yb(),a.play()):Ea()}function Bc(){ub()?b.video.pause():
    b.video.play()}function Cc(){if(L())return b.video.muted?!1:!0}function Zc(){C=Aa;var a=document.createElement("video");navigator.getMedia=navigator.getUserMedia||navigator.webkitGetUserMedia||navigator.mozGetUserMedia||navigator.msGetUserMedia;if(!navigator.getMedia)return setTimeout(Ea,0),a;navigator.getMedia({video:{mandatory:{minWidth:ec}},audio:!1},function(b){a.oncanplay=ad;var e=window.URL||window.webkitURL;a.src=e?e.createObjectURL(b):b;a.play()},function(a){Ea();console.log("navigator.getMedia error: "+
    a.name+" "+a.message)});return a}function ad(a){function b(){e.videoWidth&&e.videoHeight?(e.width=e.videoWidth,e.height=e.videoHeight,yb()):20>c++?setTimeout(b,200):Ea()}var e=a.target,c=1;b()}function Ea(){C=ab;ha();l();Qa&&setTimeout(Qa,0)}function yb(){if(b&&!z()){C=Ja;if(X())b.width=b.video.width,b.height=b.video.height;else if(vb()){if(!g||b.img.width!=6*b.img.height){C=ab;l();return}b.width=b.img.height*Math.PI;b.height=b.width/2}else b.width=b.img.width,b.height=b.img.height;if(vb())b.horzFov=
    360,b.vertFov=180;else if(b.vertFov=b.horzFov*b.height/b.width,180<b.vertFov)b.horzFov*=180/b.vertFov,b.vertFov=180;b.is360=360==b.horzFov;b.scale=fb(b.scale);b.pan=zb(b.pan);b.tilt=Ab(b.tilt);Bb();ac();N();Dc=!1;l();Qa&&setTimeout(Qa,0)}}function yc(a){ha();R();if(b){if(g)g.canvas.style.background="transparent";Cb=!0;Ec();Cb=!1}else if(g&&g.canvas)g.canvas.style.background="#000";if(d.dataUrl){G=new Image;G.onload=function(){if(G){G.style.position="absolute";G.style.left=d.canvas.offsetLeft+d.canvas.clientLeft+
    "px";G.style.top=d.canvas.offsetTop+d.canvas.clientTop+"px";G.width=d.canvas.clientWidth;G.height=d.canvas.clientHeight;fc=!0;a?dc(a):(ac(),gc());var e=g&&E==A?g.canvas:d.canvas;e.parentNode.insertBefore(G,e);G.style.zIndex=Number(e.style.zIndex)}};try{G.src=d.dataUrl,delete d.dataUrl,d.dataUrl=null}catch(f){ha()}}else a?dc(a):(ac(),gc())}function ha(){Cb=!1;G&&fc&&(G.parentNode&&G.parentNode.removeChild(G),delete G,G=null,fc=!1);if(d.dataUrl)delete d.dataUrl,d.dataUrl=null;B=1}function hb(a,b){Fc(v+
    a,r+b,null)}function Fc(a,b,e){T=0;R();pa=!1;z()&&("number"==typeof e&&(j=fb(e)),v=a,r=b,l())}function Fa(a){pa=!1;O(j*a)}function Gc(a){pa=!0;O(j*a)}function O(a){R();z()&&(0!=sa?(gb=j,S=fb(a),S!=j&&(Y=Date.now())):(a=fb(a),j!=a&&(hc(j,a),j=a)),l())}function wb(){var a=Hc();ta=Math.max(Ka,ic);ta=Math.max(ta,a);Ra=Math.min(La,jc);Ra=Math.max(Ra,ta)}function fb(a){Sa=!1;if("number"!=typeof a||0==a)a=Hc(),Sa=!0;else if(a<ta)a=ta;else if(a>Ra)a=Ra;else for(var b=[0.125,0.125*Math.SQRT2,0.25,0.25*Math.SQRT2,
    0.5,0.5*Math.SQRT2,1,1*Math.SQRT2,2,2*Math.SQRT2,4,4*Math.SQRT2,8],e=0;e<b.length;e++)if(a>0.999*b[e]&&a<1.001*b[e]){a=b[e];break}return a}function Hc(){if(!z())return 0;var a=b.width,f=b.height,e=d.canvas.width,c=d.canvas.height;if(E==A){var h;h=Math.min(b.horzFov,bb)/2;e*=h*W/ua(h);h=Math.min(b.vertFov,cb)/2;c*=h*W/ua(h);a=Math.min(a*bb/b.horzFov,a);f=Math.min(f*cb/b.vertFov,f)}return Math.min(e/a,c/f)}function H(a,b){T=0;R();z()&&(null!==a&&(k=xb(a)),null!==b&&(s=xb(b)),M=Date.now(),l())}function xb(a){return a<
    -db?-db:a>db?db:a}function zb(a){if(b.is360)a=(a+36E3)%360;else{var f=d.canvas.width/b.width*b.horzFov/j;E==A?(f=2*Math.atan(f*W/2)*fa,f=Math.min(f,bb)):f=Math.min(f,b.horzFov);var f=f/2,e=b.horzFov-f;f>e?a=b.horzFov/2:a<f?a=f:a>e&&(a=e)}return a}function Ab(a){var f;d.canvas?(f=d.canvas.height/b.height*b.vertFov/j,E==A?(f=2*Math.atan(f*W/2)*fa,f=Math.min(f,cb)):f=Math.min(f,b.vertFov)):f=0;var e=(b.vertFov-f)/2,c=-e,e=e-b.horizon,c=c-b.horizon;E==A&&b.is360&&(90<=b.vertFov/2-b.horizon&&(e+=f/2),
    90<=b.vertFov/2+b.horizon&&(c-=f/2));e<c?a=(c+e)/2:a<c?a=c:a>e&&(a=e);return a}function hc(a,b){if(pa&&0<=t){var e=kc(a)-kc(b);v+=e;e=lc(a)-lc(b);r+=e}e=j;j=b;v=zb(v);r=Ab(r);j=e;0==Y&&(pa=!1)}function kc(a){a||(a=j);var f=t-d.canvas.width/2,e=-(F-d.canvas.height/2),c=0;E==A?(a=b.width/b.horzFov*a*fa*V(r)-e*ia(r),c=v+ib(f,a)):c=v+f/a*b.horzFov/b.width;b.is360&&(0>c?c+=360:360<c&&(c-=360));return c}function lc(a){a||(a=j);var f=t-d.canvas.width/2,e=-(F-d.canvas.height/2),c=0;E==A?(c=b.width/b.horzFov*
    a*fa,a=c*V(r)-e*ia(r),e=c*ia(r)+e*V(r),c=ib(e,Math.sqrt(f*f+a*a))):c=r+e/a*b.vertFov/b.height;return c}function jb(a,d){var e,c;if(E==A){e=b.width/b.horzFov*j*fa;c=e*V(r)-d*ia(r);var h=e*ia(r)+d*V(r);e=ib(a,c);c=ib(h,Math.sqrt(a*a+c*c))}else e=a/j*b.horzFov/b.width,c=r+d/j*b.vertFov/b.height;b.is360&&(0>e?e+=360:360<e&&(e-=360));return new Ic(e,c)}function Jc(a,f){var e,c;e=a-v;b.is360&&(-180>=e?e+=360:180<e&&(e-=360));if(E==A){var h=b.width/b.horzFov*j*fa,n=ib(ua(f),V(e));c=n-r;if(-90>=c||90<c)return null;
    var U=h/V(c),n=V(n)*U;e=ua(e)*n;c=ua(c)*h}else c=f-r,e=e/b.horzFov*b.width*j,c=c/b.vertFov*b.height*j;return new Ic(d.canvas.width/2+e,d.canvas.height/2-c)}function l(a){var d;if(z()){var e=M;d=v;var c=r,h=j;M=Date.now();var n;n=0|bd();n|=cd();0<=Ta?(200<M-Db&&(k=s=0),n=!0):(e=(M-e)/1E3,v+=k*e,r+=s*e);var U,u,m,i,e=j;0==Y||S==gb||(U=1+(M-Y)/(500*(2<<sa)),u=Math.log(gb),m=Math.log(S),i=Math.log(j),u=1+Math.min(2*Math.abs(u-i),Math.abs(m-i)+(m-i)*(m-i))/Math.abs(u-m)/16,U*=u,gb<S?(e*=U,e>S&&(e=S)):
    (e/=U,e<S&&(e=S)),e==S?(j=e,Y=0):Y=M);hc(j,e);j=e;n|=d!=v;n|=c!=r;n|=h!=j;d=n|=Kc()}else d=!1;if(!a||d||b&&b.video&&(b._type==za||b._type==la&&!b.video.ended&&!b.video.paused))a=10,ub()&&(a=E==A?100:50),setTimeout(Ec,a),N();gc();d&&Eb&&setTimeout(Eb,0)}function mc(){l(!0)}function gc(){if(k||s||T||ga||Y||X())xc?dd(mc):(Da&&(clearTimeout(Da),Da=0),Da=window.setTimeout(mc,10))}function bd(){var a=1E3*nc;if(z()){if(0==T)return ha(),!1;if(M<T+a){var d=B;B=(M-T)/a;return B!=d}if(0==b.panSpeed&&0==b.tiltSpeed)return ha(),
    T=0,!0;if(b.panSpeed!=k||b.tiltSpeed!=s){ha();if(I&&I.mode!=rb)k=s=0;else{a=(M-T-a-2E3)/4E3;if(0>a)return!0;k=a*b.panSpeed;s=a*b.tiltSpeed;k=0<b.panSpeed?Math.min(b.panSpeed,k):Math.max(b.panSpeed,k);0<b.tiltSpeed?s=Math.min(b.tiltSpeed,s):_tiltspeed=Math.max(b.tiltSpeed,s)}return!0}ha();T=0;return!1}B=0;return!1}function cd(){if(0==ga||ga==M)return!1;if(Math.sqrt(k*k+s*s)>0.02/j*b.horzFov/90){var a=1-(M-ga)/(25*(2<<Fb));if(0<a)return k*=a,s*=a,ga=M,!0}k=s=ga=0;return!0}function Ec(){if(d.ctx&&(C!=
    Aa||Dc)){d.ctx.clearRect(0,0,d.canvas.width,d.canvas.height);Gb()?(g.ctx.clearColor(0,0,0,B),g.ctx.clear(g.ctx.COLOR_BUFFER_BIT)):(g&&g.ctx&&!G&&(g.ctx.clearColor(0,0,0,1),g.ctx.clear(g.ctx.COLOR_BUFFER_BIT)),d.ctx.globalAlpha=B,d.ctx.fillStyle="#000",d.ctx.fillRect(0,0,d.canvas.width,d.canvas.height));switch(C){case Za:va("");break;case Aa:switch(b._type){case $a:case Ia:va("Loading image '"+b.src+"'...");break;case la:va("Loading video '"+b.src+"'...");break;case za:va("Opening live stream...")}break;
    case ab:switch(b._type){case $a:case Ia:va("Error loading image file '"+b.src+"' !");break;case la:va("Error loading video file '"+b.src+"' !");break;case za:va("Error opening user media live stream!")}break;case sb:va("WebGL error: Context lost!");break;case Ja:var a=d.canvas.width,f=d.canvas.height,e;d.canvas?(E==A?(e=Math.min(b.horzFov,bb),e=2*ua(e/2)/(b.horzFov*W)*b.width*j):e=b.width*j,e=Math.round(Math.min(e,d.canvas.width))):e=0;var c;E==A?(c=Math.min(b.vertFov,cb),c=2*ua(c/2)/(b.vertFov*W)*
        b.height*j):c=b.height*j;c=Math.round(Math.min(c,d.canvas.height));a=Math.round((a-e)/2);f=Math.round((f-c)/2);e=a+e;c=f+c;if(E==A)if(Gb()){var h=Date.now();g.paint(a,f,e,c);h=Date.now()-h;oc("Paint spherical (WebGL): "+h+" ms")}else h=Date.now(),d.paintSpherical(a,f,e,c),h=Date.now()-h,oc("Paint spherical (2D): "+h+" ms");else h=Date.now(),d.paintFlat(a,f,e,c),h=Date.now()-h,oc("Paint flat: "+h+" ms");if(da&&ba){d.ctx.save();d.ctx.globalAlpha=B;for(h=0;h<ba.length;h++){var n=ba[h];n.paint();!K&&
    n.isUnderCursor()&&(ra=n)}d.ctx.restore()}if(!g&&E==A&&C==Ja)d.ctx.save(),d.ctx.setTransform(1,0,0,1,0,0),d.ctx.globalAlpha=B,d.ctx.fillStyle="#000",h=d.canvas.width,n=d.canvas.height,0<a&&d.ctx.fillRect(0,0,a,n),e<h&&d.ctx.fillRect(e,0,e,n),0<f&&d.ctx.fillRect(a,0,e-a,f),c<n&&d.ctx.fillRect(a,c,e-a,n-c),d.ctx.restore();if(Pa)if(E==A)f=d.canvas.width/2,e=(v-b.compassNorth+3600)%360,Lc(e,f);else{a=50/j*(b.horzFov/b.width);f=[1,2,5,10,15,30,45,90];for(e=0;e<f.length;e++)if(a<=f[e]||e==f.length-1){a=
        f[e];break}c=v-d.canvas.width/2/j*b.horzFov/b.width;c-=b.compassNorth;c=Math.round(c/a)*a;for(c=c-a+b.compassNorth;(f=j*b.width/b.horzFov*(c-v)+d.canvas.width/2)<d.canvas.width;)e=(c-b.compassNorth+36E3)%360,Lc(Math.round(e),f),c+=a}pc&&ca.paint();ra&&1==B&&ra.paintPopup()}if(Cb)try{var U=Gb()?g.canvas:d.canvas;d.dataUrl=U.toDataURL("image/png")}catch(u){d.dataUrl=null}}}function va(a){d.ctx.globalAlpha=1;str="";str=d.canvas.style.fontStyle?str+(d.canvas.style.fontStyle+" "):str+"italic ";d.canvas.style.fontVariant&&
(str+=d.canvas.style.fontVariant+" ");d.canvas.style.fontWeight&&(str+=d.canvas.style.fontWeight+" ");str=d.canvas.style.fontSize?str+(d.canvas.style.fontSize+" "):str+"12px ";str=d.canvas.style.fontFamily?str+d.canvas.style.fontFamily:str+Ba;d.ctx.font=str;d.ctx.fillStyle="#dd0";d.ctx.textBaseline="top";d.ctx.fillText(a,15,15)}function Lc(a,b){var a=Math.round(a),e=ed(a),c=0==a%90;d.ctx.save();d.ctx.globalAlpha=B;d.ctx.font=(c?"20px":"14px")+" "+Ba;d.ctx.textBaseline="bottom";d.ctx.lineWidth=4;d.ctx.fillStyle=
    c?"#ff0":"#fff";d.ctx.strokeStyle="#222";d.ctx.beginPath();d.ctx.rect(b,d.canvas.height-14,1.5,d.canvas.height-1);d.ctx.stroke();d.ctx.fill();d.ctx.strokeText(e,b+4,d.canvas.height+0.5);d.ctx.fillText(e,b+4,d.canvas.height);d.ctx.restore()}function ed(a){switch(a){case 0:case 360:return"N";case 90:return"E";case 180:return"S";case 270:return"W";default:return kb(a,3)}}function Kc(){var a=ca.mouseOver();if(qc!=a)return qc=a,!0;a=rc();return pc!=a?(pc=a,!0):!1}function rc(){return!ea||!ca.visible?!1:
    0<=t&&t<=d.canvas.width&&0<=F&&F<d.canvas.height}function fd(a){a.imgInfo?(x.imgInfo=new Image,x.imgInfo.onload=function(){l()},x.imgInfo.onerror=function(){x.imgInfo=null},x.imgInfo.src=a.imgInfo):x.imgInfo=Hb(!1);a.imgLink?(x.imgLink=new Image,x.imgLink.onload=function(){l()},x.imgLink.onerror=function(){x.imgLink=null},x.imgLink.src=a.imgLink):x.imgLink=Hb(!0);x.border=!0===a.border;x.shadow=!0===a.shadow;x.opacity="number"==typeof a.opacity?a.opacity:1;x.opacity=aa(x.opacity,0,1)}function sc(){if(!da||
    !ba)return null;for(var a=0;a<ba.length;a++){var b=ba[a];if(b&&b.isUnderCursor())return b}return null}function Hb(a){var b=document.createElement("canvas"),e=b.width=b.height=96,c=b.getContext("2d");c.setTransform(1,0,0,1,48,48);c.beginPath();c.arc(0,0,e/2-2,0,2*Math.PI,!1);c.lineWidth=2;var d=c.createLinearGradient(0,-e/2,0,e/2);d.addColorStop(0,"#f88");d.addColorStop(1,"#a00");c.fillStyle=d;c.stroke();c.fill();c.beginPath();c.arc(0,0,0.4*e,0,2*Math.PI,!1);c.fillStyle="#f00";c.fill();c.strokeStyle=
    c.fillStyle="#fff";c.lineCap="round";c.lineJoin="round";c.lineWidth=7;c.shadowBlur=4;c.shadowColor="#444";a?(c.beginPath(),c.moveTo(-15,-15),c.lineTo(15,0),c.lineTo(-15,15)):(c.beginPath(),c.moveTo(-12,-4),c.lineTo(0,-4),c.lineTo(0,20),c.moveTo(-14,20),c.lineTo(14,20),c.stroke(),c.beginPath(),c.arc(-2,-20,2.5,0,2*Math.PI,!1));c.stroke();return b}function Mc(a){a?g||(g=new Nc,!g.canvas||!g.ctx?(delete g,g=null):Bb()):g&&!vb()&&(g.canvas.parentNode&&g.canvas.parentNode.removeChild(g.canvas),g=null);
    lb();l();N()}function Gb(){return g&&E==A&&C==Ja}function Bb(){Gb()&&g.setBuffers()}function Ib(a){var b=d.canvas,e=parseInt(d.canvas.style.borderLeftWidth);isNaN(e)&&(e=0);var c=parseInt(d.canvas.style.borderTopWidth);for(isNaN(c)&&(c=0);b&&"body"!==b.tagName.toLowerCase();)c+=b.offsetTop,e+=b.offsetLeft,b=b.offsetParent;b=a.changedTouches?a.changedTouches[0]:a;e=b.clientX-e+window.pageXOffset;b=b.clientY-c+window.pageYOffset;if(K&&a.target==d.canvas){var h=c=0,n=!1;na?a.touches&&2==a.touches.length&&
    (c=a.touches[0].clientX-a.touches[1].clientX,h=a.touches[0].clientY-a.touches[1].clientY,e=(a.touches[0].clientX+a.touches[1].clientX)/2,b=(a.touches[0].clientY+a.touches[1].clientY)/2,n="touchstart"==a.type):oa&&!1===a.isPrimary&&(c=e-t,h=b-F,e=(e+t)/2,b=(b+F)/2,n="pointerdown"==a.type);if(c||h)n?(Ua=Math.sqrt(c*c+h*h),Ga=0):Ua&&(Ga=Math.sqrt(c*c+h*h)/Ua)}t=e;F=b}function wa(a){if(d.canvas&&a)d.canvas.style.cursor="url("+a+"),move",d.canvas.width=d.canvas.width}function N(){if(d.canvas){var a;C==
Za||C==ab?a="auto":C==Aa?a="wait":ea?0>P&&ca.getFunctionUnderCursor()&&!K?a="pointer":(a=sc())&&a.isLink()&&!K?a="pointer":(a=xa?0<=P?Jb:Kb:0<=P?Lb:Mb,a=(a?"url("+a+"),":"")+"move"):a="auto";d.canvas.style.cursor=a}}function Oc(a){R();d.canvas.removeEventListener("touchstart",Va,!0);document.removeEventListener("touchend",ya,!0);document.removeEventListener("touchmove",Wa,!0);d.canvas.removeEventListener("pointerdown",Va,!0);document.removeEventListener("pointerup",ya,!0);document.removeEventListener("pointermove",
    Wa,!0);d.canvas.removeEventListener("mousedown",Va,!0);document.removeEventListener("mouseup",ya,!0);document.removeEventListener("mouseout",ya,!0);document.removeEventListener("mousemove",Wa,!0);d.canvas.removeEventListener("mousewheel",Nb,!0);d.canvas.removeEventListener("DOMMouseScroll",Nb,!1);(K=a&&(na||oa))?na?(d.canvas.addEventListener("touchstart",Va,!0),document.addEventListener("touchend",ya,!0),document.addEventListener("touchmove",Wa,!0)):oa&&(d.canvas.addEventListener("pointerdown",Va,
    !0),document.addEventListener("pointerup",ya,!0),document.addEventListener("pointermove",Wa,!0)):(d.canvas.addEventListener("mousedown",Va,!0),document.addEventListener("mouseup",ya,!0),document.addEventListener("mouseout",ya,!0),document.addEventListener("mousemove",Wa,!0),d.canvas.addEventListener("mousewheel",Nb,!0),d.canvas.addEventListener("DOMMouseScroll",Nb,!1));l()}function Q(a){a.preventDefault();a.stopPropagation()}function gd(){}function hd(){}function id(a){if(!(!ea||!z()||-1!=P))switch(a.which){case 37:case 177:a.shiftKey?
    H(k-eb,null):(H(0,0),hb(-1/Math.sqrt(j),0));break;case 39:case 176:a.shiftKey?H(k+eb,null):(H(0,0),hb(1/Math.sqrt(j),0));break;case 38:a.shiftKey?H(null,s+eb):(H(0,0),hb(0,1/Math.sqrt(j)));break;case 40:a.shiftKey?H(null,s-eb):(H(0,0),hb(0,-1/Math.sqrt(j)));break;case 13:mb&&Ob(!0);break;case 27:k||s?H(0,0):mb&&Xa&&Ob(!1);break;case 178:H(0,0);break;case 179:L()?Bc():$b();break;case 107:case 187:case 175:a.ctrlKey||(a.shiftKey?Fa(tb):Fa(Ma));break;case 109:case 189:case 174:a.ctrlKey||(a.shiftKey?
    Fa(1/tb):Fa(1/Ma));break;case 49:case 97:O(1);break;case 50:case 98:O(2);break;case 53:case 101:O(0.5);break;case 65:O(0);break;case 77:xa=!xa;N();break;case 67:Pa=!Pa;l();break;case 72:da=!da;l();break;case 73:Zb()}}function Va(a){if(!(!ea||!z()||a.which&&1!=a.which)&&!a.shiftKey&&!a.ctrlKey&&!a.altKey&&a.target==d.canvas){Ga=Ua=0;Ib(a);Q(a);document.activeElement==d.canvas||d.canvas.focus();Pc();Y=T=0;B=1;var b=ca.getFunctionUnderCursor();null!==b?(P=Ya=-1,nb=null,qc=-1,"function"===typeof b&&window.setTimeout(b,
    0)):(R(),l(),xa&&(Ta=v,ob=r),P=t,Ya=F,nb=Qc(a))}}function ya(a){if(!(!ea||!z()||a.which&&1!=a.which)&&!(0>P)&&jd(a))if(Ib(a),"mouseout"!=a.type){Q(a);var b=K?12:4,b=Math.abs(P-t)<=b&&Math.abs(Ya-F)<=b;P=Ya=-1;nb=null;N();if(b){var e=ra,c=sc();ra=c;if(e||c)if(K){if(e&&e.isLink()&&e.isPopupUnderCursor()){e.gotoUrl();Ta=ob=-1;return}}else if(c&&c.isLink()&&c.isUnderCursor()){c.gotoUrl();Ta=ob=-1;return}l()}0!=Fb&&(0!=k||0!=s)?ga=Date.now():k=s=0;Ta=ob=-1;Db=ja?window.mozAnimationStartTime:a.timeStamp;
    if("mouseout"!=a.type)if(K&&Ga&&1!=Ga)Gc(Ga),Ga=Ua=0;else if(ka&&clearTimeout(ka),b&&(Pb||pb))ka?(ka=0,pb&&setTimeout(pb,0)):ka=setTimeout(function(){ka=0;Pb()},500)}}function Wa(a){if(!(!ea||!z()||a.which&&1!=a.which)){var d=ja?window.mozAnimationStartTime:a.timeStamp;if(!Rc||!(d&&Date.now()>d)){var e=t,c=F;Ib(a);var h=d-Db;Db=d;if(0<=P){Q(a);Pc();if(ka){clearTimeout(ka);ka=0;return}if(K&&Ua)return;a=b.horzFov/b.width/j;xa?(v=Ta-(t-P)*a,r=ob+(F-Ya)*a,k/=1.2*a,s/=1.2*a,h&&(k+=100*((e-t)/h),s-=100*
    ((c-F)/h)),k*=a,s*=a):(e=t-P,c=F-Ya,k=e*Math.max(Math.abs(e),100)*Vb*a,s=-c*Math.max(Math.abs(c),100)*Vb*a);mc();Qb&&setTimeout(Qb,0)}else Kc()?l():K||(e=sc(),e!=ra&&(ra=e,l()));N()}}}function Nb(a){if(!(!ea||!z()||-1!=P)&&!a.ctrlKey&&!a.altKey&&!(a.mozInputSource&&a.mozInputSource==a.MOZ_SOURCE_TOUCH)&&!(null!=a.axis&&a.axis==a.HORIZONTAL_AXIS)&&!(null!=a.wheelDeltaY&&0==a.wheelDeltaY)&&!(null!=a.wheelDelta&&1E4<Math.abs(a.wheelDelta))){var b=a.shiftKey?tb:Ma;d.canvas.focus();Ib(a);var e=0<=(a.detail?
    -120*a.detail:a.wheelDelta);tc&&(e=!e);var c=0==Y?j:S,b=c*(e?b:1/b);0==sa&&hc(c,b);pa=!0;O(b);Q(a)}}function Pc(){document.selection?document.selection.empty():window.getSelection&&window.getSelection().removeAllRanges()}function jd(a){if(K){if(null==nb)return!1;if(void 0!==a.isPrimary)return a.isPrimary;a=Qc(a);return null==a||a==nb}return!0}function Qc(a){return K&&a.changedTouches&&a.changedTouches.length?a.changedTouches[0].identifier:a.pointerId?a.pointerId:a.streamId?a.streamId:null}function Sc(a){if(ea&&
    z()&&I){var d=ja?window.mozAnimationStartTime:a.timeStamp;if(!Rc||!(d&&Date.now()>d)){I.newEvent(a);var e=I.pan,c=I.tilt;switch(I.mode){case ma:e+=b.compassNorth;e%=360;setTimeout(function(){R();v=zb(e);r=Ab(c);l()},0);break;case Na:var c=c+60,e=3<e?e-3:-3>e?e+3:0,c=3<c?c-3:-3>c?c+3:0,h=0.5*e*Math.abs(e),n=0.5*c*Math.abs(c);xa&&(h*=-1,n*=-1);T=0;setTimeout(function(){H(h,n)},0)}}}}function Tc(a){if(Yb){var b=document.getElementById("debug1");if(b)b.innerHTML="_onCompassNeedsCalibration"}Q(a)}function kd(){console.log("Panorado JS: WebGL context lost - trying to restore WebGL!");
    l();Mc(!0)}function ld(){console.log("Panorado JS: WebGL context restored!");C=sb;yb();l()}function Uc(a,b){if(d.canvas){ha();d.canvas.width=a;d.canvas.height=b;if(d.canvas.style.width&&d.canvas.style.width.match(/px$/))d.canvas.style.width=a+"px";if(d.canvas.style.height&&d.canvas.style.height.match(/px$/))d.canvas.style.height=b+"px";if(d.canvas&&g&&g.canvas){var e=g.canvas.style;e.zIndex=d.canvas.style.zIndex;e.position="absolute";e.left=d.canvas.offsetLeft+d.canvas.clientLeft+"px";e.top=d.canvas.offsetTop+
    d.canvas.clientTop+"px";e.width=a+"px";e.height=b+"px";g.canvas.width=d.canvas.clientWidth;g.canvas.height=d.canvas.clientHeight;g.canvas.parentNode!=d.canvas.parentNode&&(g.canvas.parentNode.removeChild(g.canvas),d.canvas.parentNode.insertBefore(g.canvas,d.canvas))}e=sa;sa=0;wb();O(Sa?0:j);sa=e;l(!0)}}function lb(){Uc(d.canvas.clientWidth,d.canvas.clientHeight)}function Ob(a){if(d.canvas&&a!=Xa){if(g&&g.canvas)g.canvas.style.visibility="hidden";if(Xa=a){if(a=document.body.style,document.body.oldStyleText=
    document.body.style.cssText,a.overflow="hidden",a=d.canvas.style,d.canvas.oldStyleText=d.canvas.style.cssText,a.position="absolute",a.left="0",a.top="0",a.width="100%",a.height="100%",a.border="none",a.borderRadius="0",a.zIndex=9999,document.documentElement.scrollLeft=0,document.documentElement.scrollTop=0,document.body.scrollLeft=0,document.body.scrollTop=0,d.canvas.parentNode!=document.body)d.canvas.oldParentNode=d.canvas.parentNode,d.canvas.placeholder=document.createElement("placeholder"),d.canvas.parentNode.replaceChild(d.canvas.placeholder,
    d.canvas),document.body.appendChild(d.canvas)}else{document._exitFullScreen=document.exitFullscreen||document.webkitCancelFullScreen||document.msExitFullscreen||document.mozCancelFullScreen;document._exitFullScreen();if(d.canvas.oldParentNode)d.canvas.parentNode.removeChild(d.canvas),d.canvas.oldParentNode.replaceChild(d.canvas,d.canvas.placeholder),d.canvas.oldParentNode=null,delete d.canvas.placeholder,d.canvas.placeholder=null;if(d.canvas.oldStyleText)d.canvas.style.cssText=d.canvas.oldStyleText,
    delete d.canvas.oldStyleText;if(document.body.oldStyleText)document.body.style.cssText=document.body.oldStyleText,delete document.body.oldStyleText}lb()}}function dd(a){(window.requestAnimationFrame||window.webkitRequestAnimationFrame||function(a){window.setTimeout(a,0)})(a)}function kb(a,b){for(var e="",c=Math.pow(10,b-1);a<c&&1<c;)e+="0",c/=10;return e+a}function Nc(){function a(a,b){var d=a.getParameter(a.MAX_TEXTURE_SIZE),d=Math.min(d,8192),m=b.width/b.height,i,h;i=!1;if(b.width>d||b.height>d)i=
    !0;else if(X())i=!0;else if(0!=(b.width&b.width-1)||0!=(b.height&b.height-1))i=!0;if(!i)return imgTex=b,imgTex.widthUsed=b.width,imgTex.heightUsed=b.height,imgTex;1<=m?(i=Math.min(b.width,d),h=i/m):(h=Math.min(b.height,d),i=h*m);c.width=e(i);c.height=e(h);a=c.getContext("2d");if(!a)return null;for(var m=i/b.width,f=0;f<b.height;f+=d)for(var g=Math.min(d,b.height-f),j=0;j<b.width;j+=d){var q=Math.min(d,b.width-j);try{a.drawImage(b,j,f,q,g,j*m-0,f*m-0,q*m+0,g*m+0)}catch(y){return null}}c.widthUsed=
    i;c.heightUsed=h;return c}function f(a,b,e){b=a.createShader(b);a.shaderSource(b,e);a.compileShader(b);return!a.getShaderParameter(b,a.COMPILE_STATUS)?(console.log(a.getShaderInfoLog(b)),C=sb,null):b}function e(a){--a;for(var b=1;32>b;b<<=1)a|=a>>b;return a+1}this.ctx=this.canvas=null;var c=document.createElement("canvas");this.shAlpha=this.shMVMatrix=this.shTextureCoord=this.shVertexPos=this.shaderProg=null;this.numVertices=0;this.mvMatrix=this.texture=null;this.initShaders=function(){var a=this.ctx,
    b=f(a,a.VERTEX_SHADER,"attribute vec3 aVertexPos;\nattribute vec2 aTextureCoord;\nuniform mat4 uMvMatrix;\nvarying vec2 vTextureCoord;\nvoid main(void) {\ngl_Position = uMvMatrix * vec4(aVertexPos, 1.0);\nvTextureCoord = aTextureCoord;\n}"),e=f(a,a.FRAGMENT_SHADER,"precision lowp float;\nvarying vec2 vTextureCoord;\nuniform sampler2D uSampler;\nuniform float uAlpha;\nvoid main(void) {\nvec4 textureColor = texture2D(uSampler, vTextureCoord);\ngl_FragColor = vec4(textureColor.rgb, uAlpha);\n}");this.shaderProg=
    a.createProgram();a.attachShader(this.shaderProg,b);a.attachShader(this.shaderProg,e);a.linkProgram(this.shaderProg);a.getProgramParameter(this.shaderProg,a.LINK_STATUS)?(a.validateProgram(this.shaderProg),a.getProgramParameter(this.shaderProg,a.VALIDATE_STATUS)?(this.shMVMatrix=a.getUniformLocation(this.shaderProg,"uMvMatrix"),this.shAlpha=a.getUniformLocation(this.shaderProg,"uAlpha"),this.shVertexPos=a.getAttribLocation(this.shaderProg,"aVertexPos"),a.enableVertexAttribArray(this.shVertexPos),
    this.shTextureCoord=a.getAttribLocation(this.shaderProg,"aTextureCoord"),a.enableVertexAttribArray(this.shTextureCoord),a.useProgram(this.shaderProg)):console.log(a.getShaderInfoLog(this.shaderProg))):console.log(a.getShaderInfoLog(this.shaderProg))};if(this.canvas=document.createElement("canvas")){try{this.ctx=this.canvas.getContext("webgl")||this.canvas.getContext("experimental-webgl")}catch(h){}this.ctx?(this.canvas.addEventListener("webglcontextlost",kd,!1),this.canvas.addEventListener("webglcontextrestored",
    ld,!1),this.canvas.style.background="transparent",this.canvas.style.border="none",d.canvas.parentNode.insertBefore(this.canvas,d.canvas),this.initShaders(),this.ctx.blendFunc(this.ctx.SRC_ALPHA,this.ctx.ONE_MINUS_SRC_ALPHA),this.ctx.enable(this.ctx.BLEND),this.setBuffers=function(){vb()?this.setCubeBuffers():this.setSphereBuffers()},this.setSphereBuffers=function(){var e=X()?b.video:b.img,c=this.ctx;delete this.texture;this.texture=null;if(e=a(c,e)){var d=1/b.horzFov*e.widthUsed/e.width,h=1/b.vertFov*
    e.heightUsed/e.height,i=e.width!=e.widthUsed,f=[],j=0,g=0,l=0,q=0,y=b.horzFov,l=Math.max(-b.vertFov/2-b.horizon,-90),J=Math.min(b.vertFov/2-b.horizon,90),D,o,k=Rb;85<=b.vertFov/2+Math.abs(b.horizon)||(k*=2);for(g=l,l=0,o=!1;!o;g+=k,l++){g>=J&&(g=J,o=!0);var r=ia(g),s=V(g),v=(J-g)*h;for(j=0,q=0,D=!1;!D;j+=k,q++){j>=y&&(j=y,D=!0);var x=ia(j),z=V(j),t=j*d;D&&i&&b.is360&&(t-=5.0E-4);f.push(new md(t,v,x*s,r,-z*s))}}d=[];h=[];i=null;for(y=this.numVertices=0;y<l-1;y++){i=f[y*q];d.push(i.x);d.push(i.y);d.push(i.z);
    h.push(0);h.push(0);this.numVertices++;for(J=0;J<q;J++)i=f[y*q+J],d.push(i.x),d.push(i.y),d.push(i.z),h.push(i.xSrc),h.push(i.ySrc),i=f[(y+1)*q+J],d.push(i.x),d.push(i.y),d.push(i.z),h.push(i.xSrc),h.push(i.ySrc),this.numVertices+=2;d.push(i.x);d.push(i.y);d.push(i.z);h.push(0);h.push(0);this.numVertices++}c.bindBuffer(c.ARRAY_BUFFER,c.createBuffer());c.bufferData(c.ARRAY_BUFFER,new Float32Array(d),c.STATIC_DRAW);c.vertexAttribPointer(this.shVertexPos,3,c.FLOAT,!1,0,0);c.bindBuffer(c.ARRAY_BUFFER,
    c.createBuffer());c.bufferData(c.ARRAY_BUFFER,new Float32Array(h),c.STATIC_DRAW);c.vertexAttribPointer(this.shTextureCoord,2,c.FLOAT,!1,0,0);this.texture=c.createTexture();c.bindTexture(c.TEXTURE_2D,this.texture);try{c.texImage2D(c.TEXTURE_2D,0,c.RGBA,c.RGBA,c.UNSIGNED_BYTE,e),delete e}catch(A){c.bindTexture(c.TEXTURE_2D,null);return}c.texParameteri(c.TEXTURE_2D,c.TEXTURE_MAG_FILTER,c.LINEAR);if(0.5>=ta&&!(85<=b.vertFov/2+Math.abs(b.horizon))&&!X())try{c.texParameteri(c.TEXTURE_2D,c.TEXTURE_MIN_FILTER,
    c.LINEAR_MIPMAP_NEAREST),c.generateMipmap(c.TEXTURE_2D)}catch(B){c.texParameteri(c.TEXTURE_2D,c.TEXTURE_MIN_FILTER,c.LINEAR)}else c.texParameteri(c.TEXTURE_2D,c.TEXTURE_MIN_FILTER,c.LINEAR);c.texParameteri(c.TEXTURE_2D,c.TEXTURE_WRAP_S,c.CLAMP_TO_EDGE);c.texParameteri(c.TEXTURE_2D,c.TEXTURE_WRAP_T,c.CLAMP_TO_EDGE)}else C=Wb},this.setCubeBuffers=function(){var e=X()?b.video:b.img,c=this.ctx;delete this.texture;this.texture=null;if(e=a(c,e)){var d=e.widthUsed/e.width/6,h=e.heightUsed/e.height,i=1/e.width,
    f=0.8/e.height,d=[0,0,0,h-f,1*d,0,1*d,h-f,2*d,0,2*d,h-f,3*d,0,3*d,h-f,4*d-i,0,4*d-i,h-f,4*d-i,h-f,4*d+i,0,4*d+i,0,4*d+i,h-f,5*d-i,0,5*d-i,h-f,5*d-i,h-f,5*d+i,0,5*d+i,0,5*d+i,h-f,6*d-i,0,6*d-i,h-f];this.numVertices=22;c.bindBuffer(c.ARRAY_BUFFER,c.createBuffer());c.bufferData(c.ARRAY_BUFFER,new Float32Array([-1,1,-1,-1,-1,-1,1,1,-1,1,-1,-1,1,1,1,1,-1,1,-1,1,1,-1,-1,1,-1,1,-1,-1,-1,-1,-1,-1,-1,-1,1,1,-1,1,1,-1,1,-1,1,1,1,1,1,-1,1,1,-1,-1,-1,-1,-1,-1,-1,-1,-1,1,1,-1,-1,1,-1,1]),c.STATIC_DRAW);c.vertexAttribPointer(this.shVertexPos,
    3,c.FLOAT,!1,0,0);c.bindBuffer(c.ARRAY_BUFFER,c.createBuffer());c.bufferData(c.ARRAY_BUFFER,new Float32Array(d),c.STATIC_DRAW);c.vertexAttribPointer(this.shTextureCoord,2,c.FLOAT,!1,0,0);this.texture=c.createTexture();c.bindTexture(c.TEXTURE_2D,this.texture);try{c.texImage2D(c.TEXTURE_2D,0,c.RGBA,c.RGBA,c.UNSIGNED_BYTE,e),delete e}catch(j){c.bindTexture(c.TEXTURE_2D,null);return}c.texParameteri(c.TEXTURE_2D,c.TEXTURE_MAG_FILTER,c.LINEAR);try{c.texParameteri(c.TEXTURE_2D,c.TEXTURE_MIN_FILTER,c.LINEAR_MIPMAP_NEAREST),
    c.generateMipmap(c.TEXTURE_2D)}catch(g){c.texParameteri(c.TEXTURE_2D,c.TEXTURE_MIN_FILTER,c.LINEAR)}c.texParameteri(c.TEXTURE_2D,c.TEXTURE_WRAP_S,c.CLAMP_TO_EDGE);c.texParameteri(c.TEXTURE_2D,c.TEXTURE_WRAP_T,c.CLAMP_TO_EDGE)}else C=Wb},this.paint=function(c,e,d,h){this.canvas.style.visibility="visible";var i=this.ctx;if(!i.isContextLost()){if(X()){var f=a(i,b.video);i.bindTexture(i.TEXTURE_2D,this.texture);i.texImage2D(i.TEXTURE_2D,0,i.RGBA,i.RGBA,i.UNSIGNED_BYTE,f)}d-=c;h-=e;this.ctx.viewport(c,
    e,d,h);this.setMvMatrix(d,h);i.uniformMatrix4fv(this.shMVMatrix,!1,this.mvMatrix);i.uniform1f(this.shAlpha,B);i.drawArrays(i.TRIANGLE_STRIP,0,this.numVertices);g.ctx.flush();g.ctx.finish()}},this.setMvMatrix=function(a,c){var e,d=a/b.width*b.horzFov/j;e=c/b.height*b.vertFov/j;d=Math.sqrt(d*d+e*e);e=2*Math.atan(d*W/2)*fa;d=a/c;e=1.0E-5*ua(e/2)/Math.sqrt(1+d*d);var d=[1.0E-5/(e*d),0,0,0,0,1.0E-5/e,0,0,0,0,-1.0000000000999998,-1,0,0,-2.0000000001E-5,0],h=v;e=V(h);h=ia(h);e=[e,0,-h,0,0,1,0,0,h,0,e,0,
    0,0,0,1];var f=-r,h=V(f),f=ia(f);this.mvMatrix=Vc(Vc(e,[1,0,0,0,0,h,f,0,0,-f,h,0,0,0,0,1]),d)}):(delete this.canvas,this.canvas=null)}}function $c(a){function b(a){return t<a.x||t>a.x+a.cx||F<a.y||F>a.y+a.cy?!1:!0}function e(){if(!da)return null;var a=Jc(g,u);if(!a)return null;var b=p&&p.src?p.width:Xb,b=b*h(),c=p&&p.src?p.height:Xb,c=c*h();a.x-=b/2;a.y-=c/2;return 0>a.x+b||a.x>d.canvas.width||0>a.y+c||a.y>d.canvas.height?null:new Sb(a.x,a.y,b,c)}function c(){if(!m)return null;var a=e();if(!a)return null;
    d.ctx.save();d.ctx.font=Ca+"px "+Ba;for(var b=m.split("<br>"),c=0,f=0,c=0;c<b.length;c++){var i=d.ctx.measureText(b[c]);if(i.width>f)f=i.width}d.ctx.restore();a=new Sb(a.x+1.2*a.cx,a.y+a.cy/10,f+0.8*Ca,(c+0.5)*Ca);b=4*h();if(0>a.x)a.x=0;else if(a.x>d.canvas.width-a.cx*b)a.x=d.canvas.width-a.cx*b;if(0>a.y)a.y=0;else if(a.y>d.canvas.height-a.cy*b)a.y=d.canvas.height-a.cy*b;return a}function h(){var a=0.2*Math.log(10*j),a=Math.max(a,0.25);return a=Math.min(a,2)}function n(){return i?!0:!1}this.isUnderCursor=
    function(){var a=e();return!a?!1:b(a)};this.isPopupUnderCursor=function(){var a=c();return!a?!1:b(a)};this.gotoUrl=function(){if(i)if("_self"==w)window.location.href=i;else{var a=self.open(i,w);a?a.focus():window.location.href=i}};this.isLink=n;this.paint=function(){var a=e();if(a&&p)d.ctx.globalAlpha=B,d.ctx.drawImage(p,a.x,a.y,a.cx,a.cy)};this.paintPopup=function(){var a=d.ctx;a.save();a.globalAlpha=B*q;if(r)a.shadowColor="#444",a.shadowBlur=40*h(),a.shadowOffsetX=1,a.shadowOffsetY=1;a.font=Ca+
    "px "+Ba;var b=c();if(b){a.strokeStyle=k?"#008":"transparent";a.lineWidth=k?0.5:0;var e=4*h();a.setTransform(e,0,0,e,b.x,b.y);e=d.ctx.createLinearGradient(0,0,0,b.cy);e.addColorStop(0,"#fff");e.addColorStop(1,"#ccc");a.fillStyle=e;b.x=b.y=0;Wc(a,b,2);a.shadowBlur=0;a.shadowOffsetX=0;a.shadowOffsetY=0;a.fillStyle="#008";a.textAlign="left";a.textBaseline="middle";b=m.split("<br>");for(e=0;e<b.length;e++)a.fillText(b[e],0.4*Ca,Ca*(e+0.7))}a.restore()};var g=a.pan?Number(a.pan):0,u=a.tilt?Number(a.tilt):
    0,m=a.text?a.text:null,i=a.url?a.url:null,w=a.target?a.target:"_self";Object.defineProperty(this,"pan",{set:function(a){g=a;l()},get:function(){return g}});Object.defineProperty(this,"tilt",{set:function(a){u=a;l()},get:function(){return u}});Object.defineProperty(this,"text",{set:function(a){m=a},get:function(){return m}});Object.defineProperty(this,"url",{set:function(a){i=a},get:function(){return i}});Object.defineProperty(this,"target",{set:function(a){w=a},get:function(){return w}});Object.defineProperty(this,
    "img",{get:function(){return p?p.src:null}});var p;a.img?(p=new Image,p.src=a.img):p=n()?x.imgLink:x.imgInfo;n()&&(m+="  >>");var k="boolean"==typeof a.border?a.border:x.border,r="boolean"==typeof a.shadow?a.shadow:x.shadow,q="number"==typeof a.opacity?a.opacity:x.opacity,q=aa(q,0,1)}function nd(){function a(a){R();c=a;window.removeEventListener("deviceorientation",Sc,!1);window.removeEventListener("compassneedscalibration",Tc,!1);switch(a){case ma:case Na:window.addEventListener("deviceorientation",
    Sc,!1),window.addEventListener("compassneedscalibration",Tc,!1)}}function b(){switch(c){case ma:return"absolute";case Na:return"relative";default:return"none"}}function e(a,b,c){this.pan=a;this.tilt=b;this.timestamp=c}Object.defineProperty(this,"mode",{set:function(b){a(b)},get:function(){return c}});Object.defineProperty(this,"isGlassMode",{get:function(){return c==ma}});Object.defineProperty(this,"usrMode",{set:function(b){switch(b){case "absolute":a(ma);break;case "relative":a(Na);break;default:a(rb)}},
    get:function(){return b()}});this.setListeners=function(){a(c)};this.newEvent=function(a){var b=0;if(void 0!=screen.mozOrientation)switch(screen.mozOrientation){case "portrait-primary":b=90;break;case "landscape-secondary":b=180;break;case "portrait-secondary":b=-90;break;case "landscape-primary":b=0}else if(void 0!=window.orientation)b=window.orientation;var f=0,j=0;switch(c){case ma:switch(b){case 0:f=3600-a.alpha-a.gamma;break;case -90:f=3600-a.alpha-90;90<Math.abs(a.beta)&&!ja&&(f+=180);break;
    case 180:f=3600-a.alpha+a.gamma+180;break;case 90:f=3600-a.alpha+90,90<Math.abs(a.beta)&&!ja&&(f+=180)}f%=360;break;case Na:switch(b){case 0:f=-a.gamma;break;case -90:f=a.beta;break;case 180:f=a.gamma;break;case 90:f=-a.beta}}switch(b){case 0:j=a.beta-90;-90>a.beta&&(j=90);break;case -90:j=a.gamma-90;90<Math.abs(a.beta)&&(j=ja?-j:0>=a.gamma?j+180:90);break;case 180:j=-a.beta-90;90<a.beta&&(j=90);break;case 90:j=-a.gamma-90,90<Math.abs(a.beta)&&(j=ja?-j:0<a.gamma?j+180:90)}if(c==ma){b=Date.now();for(a=
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                ja?1E3:2E3;0<d.length&&(20<=d.length||d[0].timestamp<=b-a);)d.shift();d.push(new e(f,j,b));n=g=0;for(var b=d[d.length-1],j=b.timestamp,b=b.pan,p=0,l=0,k=0,q=d.length-1;0<=q;q--){var y=d[q],J=(a-(j-y.timestamp))/a;if(0>J)break;var k=k+J,D=y.pan;-180>D-b?D+=360:180<D-b&&(D-=360);f+=360;f%=360;p+=D*J;l+=y.tilt*J}k&&(n=p/k,g=l/k)}else n=f,g=j};Object.defineProperty(this,"pan",{get:function(){return n}});Object.defineProperty(this,"tilt",{get:function(){return g}});var c=rb,d=[],n=0,g=0}function V(a){return a?
    Math.cos(a*W):1}function ia(a){return Math.sin(a*W)}function ua(a){return Math.tan(a*W)}function ib(a,b){return Math.atan2(a,b)*fa}function aa(a,b,e){return a<=b?b:a>=e?e:a}function Wc(a,b){a.beginPath();a.rect(b.x,b.y,b.cx,b.cy);a.fill();a.stroke()}function oc(a){if(Yb){var b=document.getElementById("debug3");if(b)b.innerHTML=a}}function Ic(a,b){this.x=a;this.y=b}function Sb(a,b,e,c){this.x=a;this.y=b;this.cx=e;this.cy=c}function od(a,b){this.pan=a;this.tilt=b;this.yDisp=this.xDisp=0;this.valid=
    !1}function md(a,b,e,c,d){this.xSrc=a;this.ySrc=b;this.x=e;this.y=c;this.z=d}function Vc(a,b){for(var e=[],c=0,d=0,n,j,g;;){n=0;j=c;for(g=d;!(n+=a[j++]*b[g],g+=4,16<=g););e.push(n);d++;if(4==d){c+=4;if(16==c)break;d=0}}return e}Yb=!1;Tb="2.2.1.11";Ub="http://www.panorado.com";vc="(c) 2012-2014 by Karl Maloszek - Simple Software";xc=!1;W=Math.PI/180;fa=180/Math.PI;qb=1;A=2;$a=0;Ia=1;la=2;za=3;wc=3;eb=3;db=45;Ka=0.125;La=8;Ma=Math.SQRT2;tb=Math.sqrt(Math.sqrt(Math.sqrt(Math.SQRT2)));bb=120;cb=81.8;
    Vb=0.04;Xb=80;Ca=8;Ba="Arial,sans-serif";Z=30;Oa=20;Za=0;Aa=1;Ja=2;ab=3;sb=4;rb=0;ma=1;Na=2;Wb=void 0;this.about=Zb;this.reset=$b;this.move=hb;this.moveTo=Fc;this.zoom=Fa;this.zoomToCursor=Gc;this.setSpeed=H;this.resize=Uc;this.selectImage=zc;this.nextImage=cc;this.setImage=function(a){bc(a);$=-1};var Ha=navigator.userAgent,Xc=0<=Ha.indexOf("MSIE")||0<=Ha.indexOf("Trident/");Ha.indexOf("Chrome");var ja=0<=Ha.indexOf("Firefox");0<=Ha.indexOf("Opera")||Ha.indexOf("OPR/");var Rc=0<=Ha.indexOf("Android"),
        ec=640;Object.defineProperty(this,"minLivestreamWidth",{set:function(a){ec=a},get:function(){return ec}});if(Object.defineProperty)if(Object.defineProperty(this,"version",{get:function(){return Tb}}),"object"!=typeof uc)alert("PanoradoJS object constructor requires a Canvas parameter!");else{Object.defineProperty(this,"canvas",{get:function(){return d.canvas}});var Xa=!1;Object.defineProperty(this,"fullWindow",{set:function(a){Ob(a)},get:function(){return Xa}});var mb=!0;Object.defineProperty(this,
        "fullWindowEnabled",{set:function(a){mb=a?!0:!1},get:function(){return mb}});var qa=null;Object.defineProperty(this,"imageList",{set:function(a){qa=a;$=-1;ca.create()},get:function(){return qa}});var $=-1,b=null;Object.defineProperty(this,"image",{set:function(a){bc(a);$=-1},get:function(){return b}});var G=null,fc=!1,Cb=!1,E=qb;Object.defineProperty(this,"projection",{set:function(a){E="spherical"==a?A:qb;Bb();l()},get:function(){return E==A?"spherical":"flat"}});var pd=function(){var a=!1,b=document.createElement("canvas");
        if(b){try{var e=b.getContext("webgl")||b.getContext("experimental-webgl");e&&(delete e,a=!0)}catch(c){}delete b}return a}();Object.defineProperty(this,"isWebGlAvailable",{get:function(){return pd}});Object.defineProperty(this,"useWebGl",{set:function(a){Mc(a)},get:function(){return g?!0:!1}});var Rb=5;Object.defineProperty(this,"gridSize",{set:function(a){Rb=aa(a,1,8);Bb();l()},get:function(){return Rb}});var ea=!0;Object.defineProperty(this,"enabled",{set:function(a){ea=a?!0:!1},get:function(){return ea}});
        var ta=Ka,ic=Ka;Object.defineProperty(this,"minScale",{set:function(a){ic=aa(a,Ka,La);wb();O(j)},get:function(){return ic}});var Ra=La,jc=La;Object.defineProperty(this,"maxScale",{set:function(a){jc=aa(a,Ka,La);wb();O(j)},get:function(){return jc}});var na=!1;if(void 0!==document.ontouchstart)try{document.createEvent("TouchEvent"),na=!0}catch(qd){}var oa=!1;if(navigator.msMaxTouchPoints)try{document.createEvent("MsPointerEvent"),oa=!0}catch(rd){}Object.defineProperty(this,"isTouchAvailable",{get:function(){return na||
            oa}});var K=na||oa;Object.defineProperty(this,"useTouch",{set:function(a){Oc(a)},get:function(){return K}});var I=null;try{document.createEvent("DeviceOrientationEvent"),I=new nd}catch(sd){}Object.defineProperty(this,"isOrientationAvailable",{get:function(){return I?!0:!1}});Object.defineProperty(this,"orientationMode",{set:function(a){if(I)R(),I.usrMode=a},get:function(){return I?I.usrMode:"none"}});var xa=na||oa;Object.defineProperty(this,"mouseMode",{set:function(a){xa="grab"==a;N()},get:function(){return xa?
            "grab":"pan"}});var tc=!1;Object.defineProperty(this,"mouseWheel",{set:function(a){tc="in"==a},get:function(){return tc?"in":"out"}});var Mb="",Lb="",Kb="",Jb="";Object.defineProperty(this,"panCursor0",{set:function(a){wa(a);Mb=a;N()},get:function(){return Mb}});Object.defineProperty(this,"panCursor1",{set:function(a){wa(a);Lb=a;N()},get:function(){return Lb}});Object.defineProperty(this,"grabCursor0",{set:function(a){wa(a);Kb=a;N()},get:function(){return Kb}});Object.defineProperty(this,"grabCursor1",
            {set:function(a){wa(a);Jb=a;N()},get:function(){return Jb}});var Fb=2;Object.defineProperty(this,"softPan",{set:function(a){Fb=aa(a,0,5)},get:function(){return Fb}});var sa=3;Object.defineProperty(this,"softZoom",{set:function(a){sa=aa(a,0,5)},get:function(){return sa}});var nc=0.5;Object.defineProperty(this,"softFade",{set:function(a){nc=aa(a,0,10)},get:function(){return nc}});var C=Za;Object.defineProperty(this,"loaded",{get:function(){return z()}});var Dc=!0,v=0;Object.defineProperty(this,"pan",
            {set:function(a){z()&&(R(),v=zb(a),l())},get:function(){return z()?v:0}});var r=0;Object.defineProperty(this,"tilt",{set:function(a){z()&&(R(),r=Ab(a),l())},get:function(){return z()?r:0}});var j=1;Object.defineProperty(this,"scale",{set:function(a){pa=!1;O(a)},get:function(){return j}});var Sa=!1;Object.defineProperty(this,"panSpeed",{set:function(a){H(a,null)},get:function(){return z()?k:0}});Object.defineProperty(this,"tiltSpeed",{set:function(a){H(null,a)},get:function(){return z()?s:0}});Object.defineProperty(this,
            "mousePan",{get:function(){return z()?kc(j):0}});Object.defineProperty(this,"mouseTilt",{get:function(){return z()?lc(j):0}});Object.defineProperty(this,"videoPlaying",{set:function(a){a?L()&&b.video.play():L()&&b.video.pause()},get:function(){return ub()}});Object.defineProperty(this,"videoSound",{set:function(a){if(L())b.video.muted=!a},get:function(){return Cc()}});Object.defineProperty(this,"videoDuration",{get:function(){return L()&&b.video.duration?b.video.duration:0}});Object.defineProperty(this,
            "videoCurrentTime",{set:function(a){if(L()){if(0>a)a=0;else if(a>b.video.duration)a=b.video.duration;b.video.currentTime=a;b.video.play()}},get:function(){return L()&&b.video.currentTime?b.video.currentTime:0}});var Da=0,B=0,T=0,M=0,k=0,s=0,Ta=-1,ob=-1,ga=0,Y=0,gb=0,S=0,Db=0,t=-1,F=-1,P=-1,Ya=-1,nb=null,pa=!1,Ua=0,Ga=0,ka=0,Qa=null,Pb=null,pb=null,Qb=null,Eb=null;Object.defineProperty(this,"onImageLoaded",{set:function(a){Qa=a},get:function(){return Qa}});Object.defineProperty(this,"onClick",{set:function(a){Pb=
            a},get:function(){return Pb}});Object.defineProperty(this,"onDblClick",{set:function(a){pb=a},get:function(){return pb}});Object.defineProperty(this,"onMouseMove",{set:function(a){Qb=a},get:function(){return Qb}});Object.defineProperty(this,"onImageMove",{set:function(a){Eb=a},get:function(){return Eb}});var Pa=!1;Object.defineProperty(this,"compassVisible",{set:function(a){Pa=a;l()},get:function(){return Pa}});var da=!0;Object.defineProperty(this,"hotspotsVisible",{set:function(a){da=a;l()},get:function(){return da}});
        var x={imgInfo:Hb(!1),imgLink:Hb(!0),border:!1,shadow:!1,opacity:1};Object.defineProperty(this,"hotspotTemplate",{set:function(a){fd(a)},get:function(){return x}});var ba=null,ra=null,d=new function(a){function d(a,b){return a.xDisp>=b.x&&a.xDisp<=b.x+b.cx&&a.yDisp>=b.y&&a.yDisp<=b.y+b.cy}this.arGrid=this.gridSize=this.dataUrl=this.ctx=this.canvas=null;this.useTriangles=Xc;if((this.canvas=a)&&this.canvas.getContext)if(this.ctx=a.getContext("2d")){this.canvas.setAttribute("tabindex",0);this.canvas.setAttribute("hidefocus",
            !0);a=this.canvas.style;a.outline="none";if(!Number(a.zIndex)||0>a.zIndex)a.zIndex=0;a.position="relative";a["-ms-touch-action"]="none";a["touch-action"]="none";a["-ms-content-zooming"]="none";a["content-zooming"]="none";a.background="transparent";this.canvas.addEventListener("keydown",id);Xc&&(this.canvas.addEventListener("MSGestureTap",Q),this.canvas.addEventListener("MSGestureHold",Q),this.canvas.addEventListener("MSGestureStart",Q),this.canvas.addEventListener("MSGestureChange",Q),this.canvas.addEventListener("MSGestureEnd",
            Q),this.canvas.addEventListener("MSGestureInertiaStart",Q),this.canvas.addEventListener("MSHoldVisual",Q));this.canvas.addEventListener("contextmenu",Q);this.canvas.addEventListener("focus",gd);this.canvas.addEventListener("blur",hd);window.addEventListener("resize",lb);window.addEventListener("move",lb);this.provide2dGrid=function(){this.gridSize=Rb;this.useTriangles||(this.gridSize*=0.5);this.gridSize*=Math.min(4/Math.min(b.width/b.horzFov*j,4),2);this.gridSize=b.horzFov/Math.floor(b.horzFov/this.gridSize);
            var a=Math.round(b.horzFov/this.gridSize);if(b.is360)this.gridSize=b.horzFov/a;var c=Math.round(b.vertFov/this.gridSize);180>b.vertFov&&c++;a++;c++;if(!this.arGrid||this.arGrid.length!=c)this.arGrid=Array(c);for(var d,f,g=Math.max(-b.vertFov/2-b.horizon,-90),u=Math.min(b.vertFov/2-b.horizon,90),m=0;m<c;m++){if(!this.arGrid[m]||this.arGrid[m].length!=a)this.arGrid[m]=Array(a);f=b.vertFov/2-b.horizon-m*this.gridSize;f>u?f=u:f<g&&(f=g);for(var i=0;i<a;i++)d=i*this.gridSize,this.arGrid[m][i]=new od(d,
                f)}};this.update2dGrid=function(a,c,d,f){for(var j=this.arGrid.length,g=this.arGrid[0].length,m=0;m<j;m++)for(var i=0;i<g;i++){var w=this.arGrid[m][i];w.valid=!1;if(!(w.tilt<d)&&!(w.tilt>f)){if(b.is360&&a>=c){if(w.pan<a&&w.pan>c)continue}else{if(w.pan<a)continue;if(w.pan>c)continue}var p=Jc(w.pan,w.tilt);if(p)w.valid=!0,w.xDisp=p.x,w.yDisp=p.y}}};this.paintFlat=function(a,c,d,f){var g=this.ctx,u=X()?b.video:b.img;g.globalAlpha=B;g.setTransform(1,0,0,1,0,0);var m=b.width,i=b.height,w=v/b.horzFov*m,
            p=(0.5-(r+b.horizon)/b.vertFov)*i,k=Math.min((d-a)/j,m),i=Math.min((f-c)/j,i),w=w-k/2,p=p-i/2,k=w+k,i=p+i;0>w&&(b.is360?(w+=m,k+=m):w=0);0>p&&(p=0);if(k<=m)g.drawImage(u,w,p,k-w,i-p,a,c,d-a,f-c);else{var l=(m-w)*j;ja&&(l=(l+0.5).toFixed(0));g.drawImage(u,w,p,m-w,i-p,a,c,l,f-c);g.drawImage(u,0,p,k-m,i-p,a+l,c,d-a-l,f-c)}};this.paintSpherical=function(a,c,h,g){this.ctx.globalAlpha=B;var a=h-a,k=g-c;this.provide2dGrid();var h=jb(0,0),c=jb(0,k/2),g=jb(a/2,k/2),u=jb(a/2,-k/2),k=jb(0,-k/2);90<Math.abs(c.x-
            k.x)?0<h.y?(a=b.horzFov/2,h=Math.min(k.y,u.y),g=90):(a=b.horzFov/2,h=-90,g=Math.max(c.y,g.y)):(a=Math.max(g.x,u.x),h=Math.min(k.y,u.y),g=Math.max(c.y,g.y),a+=this.gridSize);c=-a;a+=v;c+=v;b.is360&&(c=(c+3600)%360,a=(a+3600)%360);-90<h&&(h-=this.gridSize);90>g&&(g+=this.gridSize);this.update2dGrid(c,a,h,g);c=this.arGrid.length-1;g=this.arGrid[0].length-1;a=this.gridSize/b.horzFov*b.width*j;h=this.gridSize/b.vertFov*b.height*j;a=new Sb(-a,-h,this.canvas.width+2*a,this.canvas.height+2*h);for(h=0;h<c;h++)for(u=
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                              0;u<g;u++)if(k=this.arGrid[h][u],k.valid){var m=this.arGrid[h][u+1];if(m.valid){var i=this.arGrid[h+1][u+1];if(i.valid){var w=this.arGrid[h+1][u];if(w.valid&&(d(k,a)||d(m,a)||d(i,a)||d(w,a))){var p=k.pan/b.horzFov*b.width,l=m.pan/b.horzFov*b.width;l==b.width&&l--;this.paintTile(p,(0.5-(k.tilt+b.horizon)/b.vertFov)*b.height,l,(0.5-(w.tilt+b.horizon)/b.vertFov)*b.height,k.xDisp,k.yDisp,m.xDisp,m.yDisp,i.xDisp,i.yDisp,w.xDisp,w.yDisp,0<k.tilt+b.horizon,u<g/2)}}}}};this.paintTile=function(a,b,d,f,g,j,
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        k,i,l,p,r,s,q){this.useTriangles?(this.paintTri(a,b,d,b,d,f,g,j,k,i,l,p,!0),this.paintTri(a,b,d,f,a,f,g,j,l,p,r,s,!1)):q?this.paintTri(a,b,d,f,a,f,g,j,l,p,r,s,!0):this.paintTri(a,b,d,b,d,f,g,j,k,i,l,p,!1)};this.paintTri=function(a,c,d,f,g,k,m,i,l,p,r,s,q){var y=this.ctx,J=a,D=c,o=d-a,v=k-c,t,d=d-a,f=f-c,g=g-a,k=k-c,a=c=0,l=l-m,p=p-i,r=r-m,s=s-i,x=g*f-d*k,z=(r*f-l*k)/x,A=(s*f-p*k)/x,l=(l*g-r*d)/x,p=(p*g-s*d)/x;y.save();y.setTransform(z,A,l,p,m,i);this.useTriangles&&(y.beginPath(),t=1==B?1:0,q?(y.moveTo(a-
            2*t,c-t),y.lineTo(d+t,f-t),y.lineTo(g+t,k+2*t)):(y.moveTo(a-t,c-2*t),y.lineTo(d+2*t,f+t),y.lineTo(g-t,k+t)),y.closePath(),y.clip());try{var C=X()?b.video:b.img;t=1==B?10/j/this.gridSize:0;o=Math.min(o+t,b.width-J);v=Math.min(v+t,b.height-D);y.drawImage(C,J,D,o,v,0,0,o,v)}catch(E){}y.restore()}}}(uc),g=new Nc;if(!g.canvas||!g.ctx)delete g,g=null;Oc(K);var ca=new function(){function a(){if(d.canvas){q=[];var a=d.ctx,c=1.1*Z*e,D=1.5*Z*e,o=10+c/2;g&&(q.push({x:o,fnPaint:function(){a.beginPath();a.moveTo(-4,
            -4);a.lineTo(4,0);a.lineTo(-4,4);a.closePath();a.stroke()},fnClick:function(){$b()}}),o+=D);n&&L()&&(q.push({x:o,fnPaint:function(){a.beginPath();a.arc(0,0,7,0,2*Math.PI,!0);ub()?(a.moveTo(-2,-3),a.lineTo(-2,3),a.moveTo(2,-3),a.lineTo(2,3)):(a.moveTo(-2,-2),a.lineTo(2,0),a.lineTo(-2,2),a.closePath(),a.stroke());a.stroke()},fnClick:function(){Bc()}}),o=o+c+Z*e,q.push({x:o,xFactor:3,fnPaint:function(){var c=L()&&b.video.duration?b.video.currentTime/b.video.duration:0;a.fillStyle="rgba(196, 196, 255, 0.6)";
            a.fillRect(-44,-9,88*c,18);if(L())var c=b.video.currentTime,d=b.video.duration,c=kb(Math.floor(c/60),2)+":"+kb(Math.floor(c%60),2)+" / "+kb(Math.floor(d/60),2)+":"+kb(Math.floor(d%60),2);else c=0;a.font="12px "+Ba;a.textAlign="center";a.textBaseline="alphabetic";a.fillStyle="rgba(255,255,255,1)";a.fillText(c,0,4)},fnClick:function(){var a=3*Z*e,c=q[f()].x-a/2,a=(t-c)/a;if(L()&&b.video.duration)b.video.currentTime=b.video.duration*a,b.video.play()}}),o=o+c+Z*e,q.push({x:o,fnPaint:function(){a.beginPath();
            a.moveTo(-7,2);a.lineTo(-4,2);a.lineTo(0,5);a.lineTo(0,-5);a.lineTo(-4,-2);a.lineTo(-7,-2);a.closePath();a.stroke();a.lineWidth=1.7;a.beginPath();a.arc(0,0,4,-0.8,0.8);a.stroke();a.beginPath();a.arc(0,0,7.5,-0.8,0.8);a.stroke();if(Cc())a.lineWidth=1.5,a.moveTo(-8,7),a.lineTo(8,-7),a.moveTo(8,7),a.lineTo(-8,-7);a.stroke()},fnClick:function(){if(L())b.video.muted=!b.video.muted}}),o+=D);r&&(q.push({x:o,fnPaint:function(){a.beginPath();a.moveTo(-4,0);a.lineTo(4,0);a.stroke()},fnClick:function(){Fa(1/
            Ma)},fnEnabled:function(){return j>ta}}),o+=c,q.push({x:o,fnPaint:function(){a.beginPath();a.moveTo(-4,-1);a.lineTo(0,-4);a.lineTo(0,6);a.stroke()},fnClick:function(){O(1)},fnHilight:function(){return 1==j}}),o+=c,q.push({x:o,fnPaint:function(){a.beginPath();a.strokeRect(-4,-4,8,8)},fnClick:function(){Sa?Sa=!1:O(0)},fnHilight:function(){return Sa}}),o+=c,q.push({x:o,fnPaint:function(){a.beginPath();a.moveTo(-4,0);a.lineTo(4,0);a.moveTo(0,-4);a.lineTo(0,4);a.stroke()},fnClick:function(){Fa(Ma)},fnEnabled:function(){return j<
            Ra}}),o+=D);u&&(q.push({x:o,fnPaint:function(){a.beginPath();a.moveTo(3,-3);a.lineTo(-3,0);a.lineTo(3,3);a.stroke()},fnClick:function(){H(k-2,null)}}),o+=c,q.push({x:o,fnPaint:function(){a.beginPath();a.moveTo(-3,-4);a.lineTo(-3,4);a.moveTo(3,-4);a.lineTo(3,4);a.stroke()},fnClick:function(){H(0,0)},fnEnabled:function(){return 0!=k||0!=s}}),o+=c,q.push({x:o,fnPaint:function(){a.beginPath();a.moveTo(-3,-3);a.lineTo(3,0);a.lineTo(-3,3);a.stroke()},fnClick:function(){H(k+2,null)}}),o+=D);m&&qa&&(q.push({x:o,
            fnPaint:function(){a.beginPath();a.moveTo(-3,-3);a.lineTo(-9,0);a.lineTo(-3,3);a.stroke();a.strokeRect(1,-4,8,8)},fnClick:function(){cc(-1)},fnEnabled:function(){return 0<$}}),o+=c,q.push({x:o,fnPaint:function(){a.beginPath();a.moveTo(3,-3);a.lineTo(9,0);a.lineTo(3,3);a.stroke();a.strokeRect(-9,-4,8,8)},fnClick:function(){cc(1)},fnEnabled:function(){return $<qa.length-1}}),o+=D);i&&ba&&(q.push({x:o,fnPaint:function(){a.beginPath();a.arc(0,0,4,0,2*Math.PI,!0);a.moveTo(-7,0);a.lineTo(7,0);a.moveTo(0,
            -7);a.lineTo(0,7);a.stroke()},fnClick:function(){da=!da;l()},fnHilight:function(){return da}}),o+=c);w&&mb&&(q.push({x:o,fnPaint:function(){a.beginPath();a.moveTo(-8,2);a.lineTo(-8,6);a.lineTo(-5,6);a.moveTo(8,2);a.lineTo(8,6);a.lineTo(5,6);a.moveTo(-8,-2);a.lineTo(-8,-6);a.lineTo(-5,-6);a.moveTo(8,-2);a.lineTo(8,-6);a.lineTo(5,-6);a.stroke()},fnClick:function(){Ob(!Xa)},fnHilight:function(){return Xa}}),o+=c);p&&(q.push({x:o,fnPaint:function(){a.fillStyle=a.strokeStyle;a.font="bold 16px "+Ba;a.textAlign=
            "center";a.textBaseline="alphabetic";a.fillText("?",0,6)},fnClick:function(){"javascript:"==p.substr(0,11).toLowerCase()?eval(p.substr(11)):(v=self.open(p,"ViewerHelp","width=500,height=600,location=no,menubar=no,scrollbars=no,resizable=yes,status=no,toolbar=no,titlebar=yes"))&&v.focus()}}),o+=c);q.push({x:o,fnPaint:function(){a.beginPath();a.moveTo(-3,-1);a.lineTo(0,-1);a.lineTo(0,5);a.moveTo(-4,5);a.lineTo(4,5);a.stroke();a.beginPath();a.arc(-0.5,-5,0.7,0,2*Math.PI,!0);a.stroke()},fnClick:function(){Zb()}});
            x&&self.opener&&q.push({x:o+c,fnPaint:function(){a.beginPath();a.moveTo(0,-7);a.lineTo(0,3);a.stroke();a.beginPath();a.arc(0,1,5,225*Math.PI/180,315*Math.PI/180,!0);a.stroke()},fnClick:function(){v&&!v.closed&&(v.close(),v=null);window.close()}})}}function f(){if(!rc()||!q||document.activeElement!=d.canvas)return-1;var a=Z*e/2,b=Oa*e/2,c=d.canvas.height-10-b;if(!(F>=c-b&&F<=c+b))return-1;for(b=0;b<q.length;b++){var c=q[b],f=c.xFactor?c.xFactor:1;if(t>=c.x-a*f&&t<=c.x+a*f)return b}return-1}this.getFunctionUnderCursor=
            function(){if(!rc()||!q)return null;var a=Z*e/2,b=Oa*e/2,c=d.canvas.height-10-b;if(!(F>=c-b&&F<=c+b))return null;for(b=0;b<q.length;b++){var c=q[b],f=c.xFactor?c.xFactor:1;if(t>=c.x-a*f&&t<=c.x+a*f)return c.fnEnabled?c.fnEnabled()?c.fnClick:!1:c.fnClick}return null};this.mouseOver=f;this.paint=function(){if(q){var a=d.ctx;a.save();a.globalAlpha=1;a.strokeStyle="#fff";for(var b=d.canvas.height-10-Oa*e/2,c=0;c<q.length;c++){var f=q[c],g=f.x,h=f.xFactor?f.xFactor:1,i=!f.fnEnabled||f.fnEnabled();a.setTransform(e,
            0,0,e,g,b);a.fillStyle=f.fnHilight&&f.fnHilight()?"rgba(64, 85, 127, 0.6)":"rgba(12, 16, 24, 0.6)";a.lineWidth=i?1.5:0.5;a.strokeStyle="#fff";g=new Sb(-Z/2*h,-Oa/2,Z*h,Oa);Wc(a,g,3);a.lineWidth=2;a.strokeStyle=i?"#fff":"#aaa";f.fnPaint()}a.restore()}};this.create=a;var e=1;Object.defineProperty(this,"size",{set:function(a){e=aa(a,0.7,2);ca.create()},get:function(){return e}});var c=!0,g=!0,n=!0,r=!0,u=!0,m=!0,i=!0,w=!0,p="",v=null,x=!0;Object.defineProperty(this,"visible",{set:function(a){c=a;l()},
            get:function(){return c}});Object.defineProperty(this,"reset",{set:function(b){g=b;a()},get:function(){return g}});Object.defineProperty(this,"video",{set:function(b){n=b;a()},get:function(){return n}});Object.defineProperty(this,"scale",{set:function(b){r=b;a()},get:function(){return r}});Object.defineProperty(this,"motion",{set:function(b){u=b;a()},get:function(){return u}});Object.defineProperty(this,"hotspots",{set:function(b){i=b;a()},get:function(){return i}});Object.defineProperty(this,"fullWindow",
            {set:function(b){w=b;a()},get:function(){return w}});Object.defineProperty(this,"browse",{set:function(b){m=b;a()},get:function(){return m}});Object.defineProperty(this,"helpUrl",{set:function(b){p=b;a()},get:function(){return p}});Object.defineProperty(this,"closeWindow",{set:function(b){x=b;a()},get:function(){return x}});var q=null;a()};this.controls=ca;var pc=!1,qc=-1;ca.create();wa(Mb);wa(Lb);wa(Kb);wa(Jb);lb();l();N();setTimeout(function(){try{var a=new Image;a.onload=function(a){delete a;alert("Panorado JS viewer can't be used from this location!");
            d=null;delete d};a.onerror=function(a){delete a};}catch(b){}},1E4)}else alert("PanoradoJS requires a browser with ECMAScript 5 support! Hint: Prevent compatibility mode in MSIE!")};
